<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BearOps Messaging Library</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .btn-add {
            background: #4CAF50;
        }

        .btn-add:hover {
            background: #388e3c;
        }

        .filters {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .filter-btn.active {
            background: rgba(255, 255, 255, 0.4);
            font-weight: 600;
        }

        .message-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border-left: 5px solid #667eea;
            transition: all 0.3s ease;
        }

        .message-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .message-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .message-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .tag {
            padding: 6px 14px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .tag-trigger {
            background: #e3f2fd;
            color: #1976d2;
        }

        .tag-type {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .subject-line {
            background: #fff9e6;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 3px solid #ffa726;
        }

        .subject-line strong {
            color: #f57c00;
        }

        .message-body {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            line-height: 1.8;
            white-space: pre-wrap;
            color: #333;
            margin-bottom: 15px;
        }

        .variable {
            background: #fff3e0;
            color: #e65100;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        .notes-section {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 3px solid #4caf50;
        }

        .notes-section strong {
            color: #2e7d32;
        }

        .message-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .action-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .copy-btn {
            background: #2196F3;
            color: white;
        }

        .copy-btn:hover {
            background: #1976d2;
        }

        .edit-btn {
            background: #FF9800;
            color: white;
        }

        .edit-btn:hover {
            background: #F57C00;
        }

        .delete-btn {
            background: #f44336;
            color: white;
        }

        .delete-btn:hover {
            background: #d32f2f;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            margin: 20px;
            padding: 35px;
            border-radius: 20px;
            width: 90%;
            max-width: 700px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #333;
        }

        .close {
            color: #999;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            background: none;
            border: none;
            transition: color 0.3s;
        }

        .close:hover {
            color: #333;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 1rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 200px;
            font-family: 'Courier New', monospace;
            line-height: 1.6;
        }

        .form-hint {
            font-size: 0.85rem;
            color: #666;
            margin-top: 5px;
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            width: 100%;
            transition: transform 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: white;
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #333;
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            z-index: 10000;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.3s ease;
        }

        .toast.show {
            opacity: 1;
            transform: translateX(0);
        }
.controls {
    text-align: center;
    margin-bottom: 30px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 12px;
    backdrop-filter: blur(10px);
}

.btn {
    padding: 12px 24px;
    margin: 0 10px 10px 10px;
    background: white;
    color: #667eea;
    border: 2px solid white;
    border-radius: 8px;
    font-size: 1em;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn:hover {
    background: #667eea;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}
    </style>
</head>
<body>

<div class="controls">
<button class="btn" onclick="window.location.href='Territory-Plan.html'">Territory Plan</button>
<button class="btn" onclick="window.location.href='Miller-Heiman.html'">Heiman Miller</button>
<button class="btn" onclick="window.location.href='one2one3.html'">1:1 Tracker</button>
<button class="btn" onclick="window.location.href='BattleCards.html'">Battle Cards</button>

</div>


 <div class="container">
        <div class="header">
            <h1>BearOps Outreach Messaging Library</h1>
            <p>Organize and manage trigger-based outreach templates</p>
        </div>

        <div class="controls">
            <button class="btn btn-add" onclick="openModal()">+ Add Message Template</button>
            <button class="btn" onclick="exportToJSON()">Export to JSON</button>
            <button class="btn" onclick="importFromJSON()">Import from JSON</button>

        </div>

        <div class="filters">
            <button class="filter-btn active" data-filter="all" onclick="filterMessages('all')">All Messages</button>
            <button class="filter-btn" data-filter="funding" onclick="filterMessages('funding')">Funding Rounds</button>
            <button class="filter-btn" data-filter="expansion" onclick="filterMessages('expansion')">Team Expansion</button>
            <button class="filter-btn" data-filter="leadership" onclick="filterMessages('leadership')">GTM Leadership</button>
            <button class="filter-btn" data-filter="tech" onclick="filterMessages('tech')">Tech Stack</button>
            <button class="filter-btn" data-filter="international" onclick="filterMessages('international')">International</button>
            <button class="filter-btn" data-filter="efficiency" onclick="filterMessages('efficiency')">High Burn</button>
        </div>


        <div id="messagesContainer"></div>
    </div>

    <!-- Modal -->
    <div id="messageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Add Message Template</h2>
                <button class="close" onclick="closeModal()">&times;</button>
            </div>
            <form id="messageForm" onsubmit="saveMessage(event)">
                <input type="hidden" id="messageId">
                
                <div class="form-group">
                    <label>Template Name *</label>
                    <input type="text" id="messageName" placeholder="e.g., Funding Round - Cold Email" required>
                </div>
                
                <div class="form-group">
                    <label>Trigger Bucket *</label>
                    <select id="messageTrigger" required>
                        <option value="funding">Funding Rounds (Seed/Series A/B)</option>
                        <option value="expansion">Team Expansion / Headcount Growth</option>
                        <option value="leadership">New GTM or Revenue Leadership Hires</option>
                        <option value="tech">Tech Stack Adoption / Change</option>
                        <option value="international">International Expansion / Market Entry</option>
                        <option value="efficiency">High Burn / Operational Inefficiency</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Message Type *</label>
                    <select id="messageType" required>
                        <option value="cold-email">Cold Email</option>
                        <option value="follow-up">Follow-up Email</option>
                        <option value="linkedin">LinkedIn Message</option>
                        <option value="phone">Phone Script</option>
                        <option value="meeting">Meeting Request</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Subject Line (for emails)</label>
                    <input type="text" id="messageSubject" placeholder="e.g., Scaling Sales & Marketing at [Company]?">
                    <div class="form-hint">Use [Company], [Name], [Title] for personalization</div>
                </div>
                
                <div class="form-group">
                    <label>Message Template *</label>
                    <textarea id="messageBody" required placeholder="Enter your message template here...

Use variables:
[Company] - Company name
[Name] - Contact name
[Title] - Contact title
[Trigger] - Specific trigger event"></textarea>
                    <div class="form-hint">Variables will be highlighted when displayed</div>
                </div>
                
                <div class="form-group">
                    <label>Notes / Context</label>
                    <textarea id="messageNotes" style="min-height: 100px;" placeholder="When to use this template, success rate, tips, etc."></textarea>
                </div>
                
                <button type="submit" class="submit-btn">Save Template</button>
            </form>
        </div>
    </div>

    <input type="file" id="fileInput" accept=".json" style="display: none;" onchange="handleFileImport(event)">

    <script>
        let messages = [];
        let currentFilter = 'all';
        let editingId = null;

        const triggerNames = {
            'funding': 'Funding Rounds',
            'expansion': 'Team Expansion',
            'leadership': 'GTM Leadership',
            'tech': 'Tech Stack',
            'international': 'International',
            'efficiency': 'High Burn'
        };

        const typeNames = {
            'cold-email': 'Cold Email',
            'follow-up': 'Follow-up',
            'linkedin': 'LinkedIn',
            'phone': 'Phone Script',
            'meeting': 'Meeting Request'
        };

        // Load messages from localStorage
        function loadMessages() {
            const saved = localStorage.getItem('bearopsMessages');
            if (saved) {
                messages = JSON.parse(saved);
            }
            renderMessages();
        }

        // Save messages to localStorage
        function saveMessages() {
            localStorage.setItem('bearopsMessages', JSON.stringify(messages));
        }

        // Open modal
        function openModal(id = null) {
            document.getElementById('messageModal').classList.add('active');
            
            if (id) {
                editingId = id;
                const msg = messages.find(m => m.id === id);
                if (msg) {
                    document.getElementById('modalTitle').textContent = 'Edit Message Template';
                    document.getElementById('messageId').value = msg.id;
                    document.getElementById('messageName').value = msg.name;
                    document.getElementById('messageTrigger').value = msg.trigger;
                    document.getElementById('messageType').value = msg.type;
                    document.getElementById('messageSubject').value = msg.subject || '';
                    document.getElementById('messageBody').value = msg.body;
                    document.getElementById('messageNotes').value = msg.notes || '';
                }
            } else {
                editingId = null;
                document.getElementById('modalTitle').textContent = 'Add Message Template';
                document.getElementById('messageForm').reset();
                document.getElementById('messageId').value = '';
            }
        }

        // Close modal
        function closeModal() {
            document.getElementById('messageModal').classList.remove('active');
            editingId = null;
        }

        // Save message
        function saveMessage(event) {
            event.preventDefault();
            
            const id = document.getElementById('messageId').value || Date.now().toString();
            const message = {
                id: id,
                name: document.getElementById('messageName').value,
                trigger: document.getElementById('messageTrigger').value,
                type: document.getElementById('messageType').value,
                subject: document.getElementById('messageSubject').value,
                body: document.getElementById('messageBody').value,
                notes: document.getElementById('messageNotes').value,
                created: editingId ? messages.find(m => m.id === id).created : new Date().toISOString(),
                modified: new Date().toISOString()
            };

            if (editingId) {
                const index = messages.findIndex(m => m.id === id);
                messages[index] = message;
                showToast('Message template updated!');
            } else {
                messages.push(message);
                showToast('Message template added!');
            }

            saveMessages();
            renderMessages();
            closeModal();
        }

        // Delete message
        function deleteMessage(id) {
            if (confirm('Are you sure you want to delete this message template?')) {
                messages = messages.filter(m => m.id !== id);
                saveMessages();
                renderMessages();
                showToast('Message template deleted');
            }
        }

        // Copy message
        function copyMessage(id) {
            const msg = messages.find(m => m.id === id);
            if (!msg) return;

            let text = '';
            if (msg.subject) {
                text += 'Subject: ' + msg.subject + '\n\n';
            }
            text += msg.body;

            navigator.clipboard.writeText(text).then(() => {
                showToast('Message copied to clipboard!');
            }).catch(() => {
                showToast('Failed to copy message');
            });
        }

        // Filter messages
        function filterMessages(filter) {
            currentFilter = filter;
            
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-filter="${filter}"]`).classList.add('active');
            
            renderMessages();
        }

        // Render messages
        function renderMessages() {
            const container = document.getElementById('messagesContainer');
            
            let filtered = currentFilter === 'all' 
                ? messages 
                : messages.filter(m => m.trigger === currentFilter);

            if (filtered.length === 0) {
                container.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ðŸ’¬</div><h2>No message templates yet</h2><p>Click "Add Message Template" to create your first outreach template</p></div>';
                return;
            }

            let html = '';
            filtered.forEach(msg => {
                const highlightedBody = msg.body.replace(/\[([^\]]+)\]/g, '<span class="variable">[$1]</span>');
                
                html += `
                    <div class="message-card">
                        <div class="message-header">
                            <div>
                                <div class="message-title">${msg.name}</div>
                                <div class="message-tags">
                                    <span class="tag tag-trigger">${triggerNames[msg.trigger]}</span>
                                    <span class="tag tag-type">${typeNames[msg.type]}</span>
                                </div>
                            </div>
                        </div>
                        
                        ${msg.subject ? `<div class="subject-line"><strong>Subject:</strong> ${msg.subject}</div>` : ''}
                        
                        <div class="message-body">${highlightedBody}</div>
                        
                        ${msg.notes ? `<div class="notes-section"><strong>Notes:</strong> ${msg.notes}</div>` : ''}
                        
                        <div style="font-size: 0.85rem; color: #999; margin-top: 15px;">
                            Created: ${new Date(msg.created).toLocaleDateString()}
                            ${msg.modified ? ' | Modified: ' + new Date(msg.modified).toLocaleDateString() : ''}
                        </div>
                        
                        <div class="message-actions">
                            <button class="action-btn copy-btn" onclick="copyMessage('${msg.id}')">Copy Template</button>
                            <button class="action-btn edit-btn" onclick="openModal('${msg.id}')">Edit</button>
                            <button class="action-btn delete-btn" onclick="deleteMessage('${msg.id}')">Delete</button>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        // Export to JSON
        function exportToJSON() {
            const dataStr = JSON.stringify(messages, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `bearops-messages-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            showToast('Messages exported successfully!');
        }

        // Import from JSON
        function importFromJSON() {
            document.getElementById('fileInput').click();
        }

        function handleFileImport(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const imported = JSON.parse(e.target.result);
                    if (Array.isArray(imported)) {
                        messages = imported;
                        saveMessages();
                        renderMessages();
                        showToast('Messages imported successfully!');
                    } else {
                        showToast('Invalid file format');
                    }
                } catch (error) {
                    showToast('Error reading file');
                }
            };
            reader.readAsText(file);
            event.target.value = '';
        }

        // Show toast
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Close modal on outside click
        window.onclick = function(event) {
            const modal = document.getElementById('messageModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Initialize
        loadMessages();
    </script>
</body>
</html>